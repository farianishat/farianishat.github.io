<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FNK</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="./assets/img/favicon.png">
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="./assets/css/style.css" rel="stylesheet" />
    <link href="./assets/fontawesome/css/fontawesome.css" rel="stylesheet" />
    <link href="./assets/fontawesome/css/brands.css" rel="stylesheet" />
    <link href="./assets/fontawesome/css/solid.css" rel="stylesheet" />
</head>
<style>
    iframe {
        overflow: hidden !important; /* Disable scrolling inside the iframe */
        border: none; /* Optional: Remove border */
        height: 100vh;
    }
</style>
<body>
<!-- Preloader -->
<div class="preloader-container" id="preloader">
    <div class="loader"></div>
</div>

<header>
    <nav class="navbar navbar-expand-lg bg-white fixed-top">
        <div class="container">
            <a class="navbar-brand" href=""></a>
            <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarScroll"
                    aria-controls="navbarScroll"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarScroll">
                <ul class="navbar-nav ms-auto my-2 my-lg-0 navbar-nav-scroll">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="research.html">Research</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="cv.html">CV</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="teaching-dossier.html">Teaching Dossier</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="extra-curricular.html">Extra Curricular</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="progress-container">
        <div class="progress-bar" id="progress"></div>
    </div>
</header>

<div class="" style="overflow-x: hidden">
    <iframe
            class="pdf"
            id="pdf-iframe"
    >
    </iframe>
</div>

<a
        href="https://raw.githubusercontent.com/farianishat/farianishat.github.com/main/assets/files/CV_of_Faria_Nishat_Khan.pdf"
        class="text-decoration-none text-white"
        download="CV_of_Faria_Nishat_Khan"
>
    <button
            class="btn btn-success position-fixed text-white py-2 px-3"
            style="bottom: 20px; left: 20px;"
    >
        Download
    </button>
</a>

<!-- JavaScript to handle preloader -->
<script>
    let preloaderHidden = false; // Flag to track preloader visibility

    // Function to hide the preloader
    function hidePreloader() {
        if (!preloaderHidden) {
        const preloader = document.getElementById('preloader');
        preloader.style.display = 'none';
        preloaderHidden = true; // Set flag to true to prevent multiple hides
        console.log('Preloader hidden');
        }
    }

    // Function to load the PDF as a Blob and set it as iframe src
    function loadPdfIntoIframe() {
        const pdfUrl = './assets/files/CV_of_Faria_Nishat_Khan.pdf'; // PDF URL
        const iframe = document.getElementById('pdf-iframe');

        // Fetch the PDF and load it fully before setting it in the iframe
        fetch(pdfUrl)
                .then(response => {
                if (!response.ok) {
                    throw new Error('PDF failed to load: ' + response.status);
                }
                return response.blob(); // Convert the response to a blob
                })
                .then(blob => {
                console.log('PDF fully loaded as Blob');

                // Create a Blob URL and set it as the iframe's src
                const blobUrl = URL.createObjectURL(blob);
                iframe.src = blobUrl;

                // Listen for iframe's load event to hide preloader
                iframe.onload = function() {
                    console.log('Iframe fully loaded with PDF');
                    hidePreloader(); // Hide the preloader after iframe loads
                };
                })
                .catch(error => {
                console.log('Error fetching the PDF:', error);
                // Optionally, handle the error by displaying an error message to the user
                });
    }

    // Use DOMContentLoaded to ensure the DOM is fully loaded before doing anything
    document.addEventListener('DOMContentLoaded', function () {
        loadPdfIntoIframe(); // Start loading the PDF into the iframe
    });
</script>

<script src="./assets/js/bootstrap.bundle.min.js"></script>
</body>
</html>
